<html>
<head>

</head>
<body style="padding: 0; margin: 0">


<canvas id="canvas" width="800" height="600" 
	style="
		width: 100%; height: 100%;
		grid-column: 1; grid-row: 1">
</canvas>

<span style="position: fixed; z-index: 100; left: 10px; top: 10px;">
	
</span>

<script src="./libs/gl-matrix.js"></script>

<script type="module" async>
	
	import {PotreeLoader} from "./src/octree/PotreeLoader.js";
	import {Geometry} from "./src/Geometry.js";
	import {Mesh} from "./src/scene/Mesh.js";
	import {Lines} from "./src/scene/Lines.js";
	import * as main from "./main.js";
	window.main = main;

	let scene = main.scene;
	window.scene = scene;

	let box = Geometry.createBox();
	let node = new Mesh("box", box);
	scene.root.add(node);

	let node2 = new Mesh("box2", box);
	node2.position.set(1, 1, -0.3);
	node2.scale.set(0.5, 0.5, 0.5);
	scene.root.add(node2);

	let linesBox = Geometry.createBoundingBox();
	let lines = new Lines("lines", linesBox);
	lines.position.set(2, 0, 0);
	scene.root.add(lines);

	let url = "http://localhost:8080/nocommit/lion/metadata.json";
	PotreeLoader.load(url).then( async (pointcloud) => {

		await pointcloud.loader.loadHierarchy(pointcloud.root);
		await pointcloud.loader.loadNode(pointcloud.root);

		//pointcloud.visibleNodes = [pointcloud.root];
		scene.root.add(pointcloud);

		let boxSize = pointcloud.boundingBox.size();
		let center = pointcloud.boundingBox.center();

		// let linesBox = Geometry.createLinesBox();
		// let boundingBox = new Lines("lines", linesBox);
		// boundingBox.position.copy(center);
		// boundingBox.scale.copy(boxSize);
		// pointcloud.add(boundingBox);

		console.log(boxSize);
		console.log(center);

	});


</script>



</body>
</html>